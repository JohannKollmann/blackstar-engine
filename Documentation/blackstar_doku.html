<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
</head>
<body>

<h1>Blackstar Edit/Engine Doku</h1>

Dieses Posting soll den aktuellen Entwicklungsstand der Engine und die bereits implementierten und geplanten Features vorstellen.

<h2>Allgemeines</h2>

Die Engine ist grundsätzlich so angelegt, dass kein für ein Spiel spezifischer Code enthalten ist, sondern nur allgemein verwendbare Komponenten, die an die persönlichen Bedürfnisse angepasst sind.
Jedes Spiel, das damit geschrieben wird, ist prinzipiell eine Mod, sodass die Engine für alle Benutzer und Spielkonzepte gleich gut (oder schlecht) geeignet sein sollte. Natürlich zielen die Implementierten Komponenten darauf ab, dass ein RPG damit geschrieben wird, aber das hält einen nicht davon ab, anderes damit anzustellen.

<h2>Bibliotheken</h2>
Da wir nicht alle Zeit der Welt haben, benutzen wir einige Bibliotheken. Dazu gehören:
<ul>
	<li><b>OGRE</b><br/>
	Ogre ist eine Grafikbibliothek, die Unterstützung bei der Benutzung aller modernen Grafikkartenfeatures bietet. Sie nimmt auch viele Verwaltungsaufgaben ab und optimiert die Auslastung der Grafikkarte. Wir nutzen die Direct3D9-Ausgabe.</li>
	<li><b>PhysX</b><br/>
	Eine Physik-Engine von NVIDIA. Optional Hardware-unterstützt allerdings oft instabil, dafür aber frei verwendbar. Zusätzlich haben wir eine kleine Wrapper-Bibliothek (OgrePhysX), die einige administrative Aufgaben beim Umgang mit PhysX abnimmt.</li>
	<li><b>OpenAL</b><br/>
	Eine freie Sound-Bibliothek von CREATIVE. Unterstützt 3D-Sound-Effekte und alles andere was eine Sound-Karte kann.</li>
</ul>


<h2>Plugin-Schnittstelle</h2>
Damit das möglich ist, gibt es eine Plugin-Schnittstelle, mit der so ziemlich beliebig tief in die Engine eingegriffen werden kann, und vor allem neue Komponenten und Editor-Funktionalität geschaffen werden kann.

<h2>Komponenten</h2>
Jedes Objekt in der Engine ist aus Komponenten zusammengesetzt, die sich natürlich auch per Plugin ergänzen lassen. Komponenten sind z.B. PC-Controller, Objekt-Scripte, Mover, Physik-Eigenschaften, Meshes. Ein Objekt ohne Komponenten kann nichts.

<h2>Scripting</h2>
Die zweite Möglichkeit recht tiefe Eingriffe vorzunehmen ist die Scripting-Schnittstelle. Wir nutzen die Scriptsprache Lua und stellen jegliche sinnvoll scriptbare Funktionalität im API bereit. Die komplette Spielmechanik soll gescriptet werden, nur Performance-kritische Routinen werden in Plugins ausgelagert und vom Script aus aufgerufen.
Bereits Implementierte Script-APIs:
<ul>
	<li><b>GUI-System</b><br/>
	Das GUI-System befindet sich auf einem Overlay über der Szene und stellt ein simples Fenstersystem zur Verfügung (für Inventar, Menüs, Healthbars...)</li>
	<li><b>Fonts</b><br/>
	Das Font-Plugin stellt mittels Shader sehr speicherschonende und hochaufgelöste Font-Texturen bereit, die Hauptsächlich fürs GUI gedacht sind, aber auch in der 3D-Szene verwandt werden können (Wegweiser, Schilder etc.)</li>
	<li><b>Objekt-Scripte</b><br/>
	Objekt-Scripte werden direkt an Objekte angefügt und können mit "ihrem" Objekt auf sehr direkte Weise kommunizieren, z.B. für NPC-Scripte, Items, Feuerbälle. All diese Funktionen stehen auch scripten zur Verfügung, die das Objekt von außen manipulieren.
	</li>
	<li><b>Prozess-System</b><br/>
	Das Prozess-System wird momentan zum Timing von Animations-Abläufen für die Spielersteuerung verwendet, kann aber beliebige abhängige Abläufe zeitlich steuern
	</li>
	<li><b>Mover</b><br/>
	ermöglichen simple Objekt-Animationen
	</li>
	<li><b>Property-Grid-Parameter</b><br/>
	ein Objekt-Script kann beliebige Parameter in die Property-Grid einblenden, z.b. für die Einstellung von In-Game-Eigenschaften
	</li>
</ul>

<h2>Speicher/Lade-Funktionen</h2>
Alle wichtigen Objekte sind mit Speicher/Lade-Funktionen ausgestattet, sodass man den kompletten Status der Engine speichern kann. Im Editor ist auch möglich, Assemblies und Einzelobjekte zu speichern.

<h1>Features in Planung</h1>

<h2>Grafischer Editor für Prozesse [bereits angefangen]</h2>
Der Prozesseditor kann beliebige voneinander abhängige Aktionen grafisch darstellen. Die Darstellung ist an ein Flussdiagramm angeleht und besteht aus mit Pfeilen verbundenen Knotenpunkten. In die Knoten können vorgefertigte Aktionen geladen werden (z.B. NPC-Tagesablaufspunkte, Dialoge). Die Knoten-Vorlagen können per Plugin (evtl auch per Script) erweitert werden.

<h2>Destructible Meshes [bereits angefangen]</h2>
Zerstörbare Geometrie wie in Crysis oder BC2. Ein Tool kann die Meshes zerhacken, welche dann mit breakable Joints versehen werden, sodass die Geometrie zerstörbar wird.

</body>
</html>
